<?php
/**
 * @var array $supportedLocales of string
 * @var array $translations of Translation
 * @var array $translationBase of TranslationBase
 * @var array $translationFiles of string
 * @var string $currentLocale
 * @var array $currentFile of string
 */
?>
<div>
    <p><?php //echo sprintf($this->translate('Congratulations! You have successfully installed the %sZF2 Skeleton Application%s. You are currently running Zend Framework version %s. This skeleton can serve as a simple starting point for you to begin building your application on ZF2.'), '<a href="https://github.com/zendframework/ZendSkeletonApplication" target="_blank">', '</a>', \Zend\Version\Version::VERSION) ?></p>
</div>

<div class="row">
    <div class="panel panel-default">
        <div class="panel-heading"><b>Basic data</b></div>
        <div class="panel-body">

            <div class="btn-group">
                <button type="button" class="btn btn-default dropdown-toggle" data-toggle="dropdown">
                    Translation file <span class="caret"></span>
                </button>
                <ul class="dropdown-menu" role="menu">
                    <li><a href="<?php echo $this->url('home', array(), array('query' => array('locale' => $currentLocale, 'file' => null))); ?>">all files</a></li>
                    <?php foreach ($translationFiles as $fileName): ?>
                    <li><a href="<?php echo $this->url('home', array(), array('query' => array('locale' => $currentLocale, 'file' => $fileName))); ?>">
                            <?php echo $fileName ?></a>
                    </li>
                    <?php endforeach; ?>
                </ul>
            </div>

            <div class="btn-group">
                <button type="button" class="btn btn-default dropdown-toggle" data-toggle="dropdown">
                    Language <span class="caret"></span>
                </button>
                <ul class="dropdown-menu" role="menu">
                    <?php foreach ($supportedLocales as $locale): ?>
                        <li><a href="<?php echo $this->url('home', array(), array('query' => array('locale' => $locale, 'file' => $currentFile))); ?>">
                                <?php echo $locale ?></a>
                        </li>
                    <?php endforeach; ?>
                </ul>
            </div>
            <b>selected file:</b>
            <?php if (empty($currentFile)): ?>
                <span class="label label-info">all files</span>
            <?php else: ?>
                <?php foreach ($currentFile as $fileName): ?>
                    <span class="label label-primary"><?php echo $fileName ?></span>
                <?php endforeach; ?>
            <?php endif; ?>

            <b>selected language:</b> <span class="label label-default"><?php echo $currentLocale ?></span>
        </div>
    </div>

    <div class="panel panel-default">
        <div class="panel-heading"><b>overall view list</b></div>
        <div class="panel-body">
            <table class="table table-hover">

                <tr>
                    <th>ID<td>
                    <th>File<td>
                    <th>Origin source<th>
                    <th>Current translation<th>
                    <th>New suggested translation<th>
                    <th>Submit new entry<th>
                    <th>Edit entry<th>
                <tr/>
                <?php foreach ($translations as $id => $translation): ?>
                    <?php /* @var $translation \Application\Model\Translation */ ?>
                    <?php /* @var $base \Application\Model\TranslationBase */ ?>
                    <?php $base = $translationBase[$translation['base_id']] ?>

                    <tr>
                        <td><?php echo $translation['id'] ?><td>
                        <td><span class="label label-primary"><?php echo $base->getTranslationFile() ?></span><td>
                        <td><?php echo $base ->getOriginSource() ?><td>
                        <td><?php echo $translation['current_translation'] ?><td>
                        <td><input type="text" class="form-control" value="<?php echo $translation['suggested_translation'] ?>" /><td>
                        <td><button type="button" class="btn btn-primary">SUBMIT</button><td>
                        <td><button type="button" class="btn btn-default">Edit</button><td>
                    <tr/>
                <?php endforeach; ?>

            </table>
        </div>
    </div>

</div>
